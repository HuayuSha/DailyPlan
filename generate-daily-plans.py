#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ç”Ÿæˆæ¯æ—¥è®¡åˆ’è„šæœ¬
ä»ä»Šå¤©åˆ°9æœˆ2å·ï¼Œä¸ºæ•°å­¦å»ºæ¨¡æ¯”èµ›åšå‡†å¤‡
"""

import os
from datetime import datetime, timedelta
import calendar

def get_weekday(year, month, day):
    """è·å–æ˜ŸæœŸå‡ """
    weekdays = ['æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­', 'æ˜ŸæœŸæ—¥']
    date = datetime(year, month, day)
    return weekdays[date.weekday()]

def format_date(year, month, day):
    """æ ¼å¼åŒ–æ—¥æœŸ"""
    return f"{year}å¹´{month}æœˆ{day}æ—¥"

def get_math_modeling_content(date, weekday):
    """è·å–æ•°å­¦å»ºæ¨¡å­¦ä¹ å†…å®¹"""
    # è®¡ç®—è·ç¦»æ¯”èµ›çš„å¤©æ•°
    competition_date = datetime(2025, 9, 3)
    days_until_competition = (competition_date - date).days
    
    # æ ¹æ®å‰©ä½™å¤©æ•°å®‰æ’å­¦ä¹ å†…å®¹
    if days_until_competition >= 6:
        # ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å­¦ä¹ ï¼ˆå‰10å¤©å­¦ä¹ 10ç« å†…å®¹ï¼‰
        day_in_phase = 17 - days_until_competition
        if day_in_phase == 0 or day_in_phase == 1:
            return "å­¦ä¹ æ•°å­¦å»ºæ¨¡ç»ªè®ºï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰17å¤©"
        elif day_in_phase == 2:
            return "å­¦ä¹ è§£ææ–¹æ³•ä¸å‡ ä½•æ¨¡å‹ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰16å¤©"
        elif day_in_phase == 3:
            return "å­¦ä¹ å¾®åˆ†æ–¹ç¨‹ä¸åŠ¨åŠ›ç³»ç»Ÿï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰15å¤©"
        elif day_in_phase == 4:
            return "å­¦ä¹ å‡½æ•°æå€¼ä¸è§„åˆ’æ¨¡å‹ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰14å¤©"
        elif day_in_phase == 5:
            return "å­¦ä¹ å¤æ‚ç½‘ç»œä¸å›¾è®ºæ¨¡å‹ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰13å¤©"
        elif day_in_phase == 6:
            return "å­¦ä¹ è¿›åŒ–è®¡ç®—ä¸ç¾¤ä½“æ™ºèƒ½ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰12å¤©"
        elif day_in_phase == 7:
            return "å­¦ä¹ æ•°æ®å¤„ç†ä¸æ‹Ÿåˆæ¨¡å‹ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰11å¤©"
        elif day_in_phase == 8:
            return "å­¦ä¹ ç»Ÿè®¡å»ºæ¨¡ä¸æœºå™¨å­¦ä¹ ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰10å¤©"
        elif day_in_phase == 9:
            return "å­¦ä¹ ä¼˜åŒ–ç®—æ³•ä¸æ•°å€¼æ–¹æ³•ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰9å¤©"
        elif day_in_phase == 10:
            return "å­¦ä¹ å»ºæ¨¡å®è·µä¸æ¡ˆä¾‹åˆ†æï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰8å¤©"
        elif day_in_phase == 11:
            return "å­¦ä¹ ç«èµ›æŠ€å·§ä¸æ€»ç»“ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰7å¤©"
        else:
            return "å¤ä¹ å·©å›ºå‰é¢ç« èŠ‚ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰6å¤©"
    elif days_until_competition >= 3:
        # ç¬¬äºŒé˜¶æ®µï¼šæ¨¡æ‹Ÿç»ƒä¹ ï¼ˆç¬¬12-15å¤©ï¼‰
        day_in_phase = 15 - days_until_competition
        if day_in_phase == 1:
            return "åšæ¨¡æ‹Ÿé¢˜ç»ƒä¹ 1ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰4å¤©"
        elif day_in_phase == 2:
            return "åšæ¨¡æ‹Ÿé¢˜ç»ƒä¹ 2ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰3å¤©"
        else:
            return f"åšæ¨¡æ‹Ÿé¢˜ç»ƒä¹ ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰{days_until_competition}å¤©"
    else:
        # ç¬¬ä¸‰é˜¶æ®µï¼šå†²åˆºå¤ä¹ ï¼ˆç¬¬16-17å¤©ï¼‰
        return f"å†²åˆºå¤ä¹ ï¼Œè·ç¦»æ¯”èµ›è¿˜æœ‰{days_until_competition}å¤©"

def get_math_modeling_details(date, weekday):
    """è·å–æ•°å­¦å»ºæ¨¡å­¦ä¹ è¯¦ç»†å†…å®¹"""
    # è®¡ç®—è·ç¦»æ¯”èµ›çš„å¤©æ•°
    competition_date = datetime(2025, 9, 3)
    days_until_competition = (competition_date - date).days
    
    # åŸºç¡€å­¦ä¹ é˜¶æ®µï¼šå‰10å¤©å­¦ä¹ 10ç« å†…å®¹
    if days_until_competition >= 6:
        # è®¡ç®—åœ¨åŸºç¡€å­¦ä¹ é˜¶æ®µä¸­çš„ç¬¬å‡ å¤©
        day_in_phase = 17 - days_until_competition
        
        if day_in_phase == 0 or day_in_phase == 1:
            return {
                "chapter": "ç»ªè®ºï¼šèµ°è¿›æ•°å­¦å»ºæ¨¡çš„å¤§é—¨",
                "focus": "æ•°å­¦å»ºæ¨¡çš„åŸºæœ¬æ¦‚å¿µã€æ–¹æ³•å’Œåº”ç”¨",
                "tasks": "é˜…è¯»ç»ªè®ºï¼Œç†è§£æ•°å­¦å»ºæ¨¡çš„æ„ä¹‰",
                "goal": "å»ºç«‹å¯¹æ•°å­¦å»ºæ¨¡çš„æ•´ä½“è®¤è¯†"
            }
        elif day_in_phase == 2:
            return {
                "chapter": "ç¬¬1ç« ï¼šè§£ææ–¹æ³•ä¸å‡ ä½•æ¨¡å‹",
                "focus": "è§£ææ–¹æ³•ã€å‡ ä½•æ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µ",
                "tasks": "å®Œæˆç¬¬1ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "æŒæ¡è§£ææ–¹æ³•å’Œå‡ ä½•æ¨¡å‹"
            }
        elif day_in_phase == 3:
            return {
                "chapter": "ç¬¬2ç« ï¼šå¾®åˆ†æ–¹ç¨‹ä¸åŠ¨åŠ›ç³»ç»Ÿ",
                "focus": "å¾®åˆ†æ–¹ç¨‹ã€åŠ¨åŠ›ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ",
                "tasks": "å®Œæˆç¬¬2ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "ç†è§£å¾®åˆ†æ–¹ç¨‹ä¸åŠ¨åŠ›ç³»ç»Ÿ"
            }
        elif day_in_phase == 4:
            return {
                "chapter": "ç¬¬3ç« ï¼šå‡½æ•°æå€¼ä¸è§„åˆ’æ¨¡å‹",
                "focus": "å‡½æ•°æå€¼ã€è§„åˆ’æ¨¡å‹çš„åŸºæœ¬æ–¹æ³•",
                "tasks": "å®Œæˆç¬¬3ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "æŒæ¡å‡½æ•°æå€¼ä¸è§„åˆ’æ¨¡å‹"
            }
        elif day_in_phase == 5:
            return {
                "chapter": "ç¬¬4ç« ï¼šå¤æ‚ç½‘ç»œä¸å›¾è®ºæ¨¡å‹",
                "focus": "å¤æ‚ç½‘ç»œã€å›¾è®ºæ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µ",
                "tasks": "å®Œæˆç¬¬4ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "ç†è§£å¤æ‚ç½‘ç»œä¸å›¾è®ºæ¨¡å‹"
            }
        elif day_in_phase == 6:
            return {
                "chapter": "ç¬¬5ç« ï¼šè¿›åŒ–è®¡ç®—ä¸ç¾¤ä½“æ™ºèƒ½",
                "focus": "è¿›åŒ–ç®—æ³•ã€ç¾¤ä½“æ™ºèƒ½çš„åŸºæœ¬åŸç†",
                "tasks": "å®Œæˆç¬¬5ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "æŒæ¡è¿›åŒ–è®¡ç®—ä¸ç¾¤ä½“æ™ºèƒ½"
            }
        elif day_in_phase == 7:
            return {
                "chapter": "ç¬¬6ç« ï¼šæ•°æ®å¤„ç†ä¸æ‹Ÿåˆæ¨¡å‹",
                "focus": "æ•°æ®å¤„ç†ã€æ‹Ÿåˆæ¨¡å‹çš„åŸºæœ¬æ–¹æ³•",
                "tasks": "å®Œæˆç¬¬6ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "æŒæ¡æ•°æ®å¤„ç†ä¸æ‹Ÿåˆæ¨¡å‹"
            }
        elif day_in_phase == 8:
            return {
                "chapter": "ç¬¬7ç« ï¼šç»Ÿè®¡å»ºæ¨¡ä¸æœºå™¨å­¦ä¹ ",
                "focus": "ç»Ÿè®¡å»ºæ¨¡ã€æœºå™¨å­¦ä¹ çš„åŸºæœ¬åŸç†",
                "tasks": "å®Œæˆç¬¬7ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "ç†è§£ç»Ÿè®¡å»ºæ¨¡ä¸æœºå™¨å­¦ä¹ "
            }
        elif day_in_phase == 9:
            return {
                "chapter": "ç¬¬8ç« ï¼šä¼˜åŒ–ç®—æ³•ä¸æ•°å€¼æ–¹æ³•",
                "focus": "ä¼˜åŒ–ç®—æ³•ã€æ•°å€¼æ–¹æ³•çš„åŸºæœ¬æ¦‚å¿µ",
                "tasks": "å®Œæˆç¬¬8ç« çš„ç»ƒä¹ é¢˜å’Œæ€è€ƒé¢˜",
                "goal": "æŒæ¡ä¼˜åŒ–ç®—æ³•ä¸æ•°å€¼æ–¹æ³•"
            }
        elif day_in_phase == 10:
            return {
                "chapter": "ç¬¬9ç« ï¼šå»ºæ¨¡å®è·µä¸æ¡ˆä¾‹åˆ†æ",
                "focus": "å®é™…å»ºæ¨¡æ¡ˆä¾‹çš„åˆ†æå’Œè§£å†³",
                "tasks": "åˆ†ææ¡ˆä¾‹ï¼Œæ€»ç»“å»ºæ¨¡æ€è·¯",
                "goal": "æé«˜å®é™…å»ºæ¨¡èƒ½åŠ›"
            }
        elif day_in_phase == 11:
            return {
                "chapter": "ç¬¬10ç« ï¼šç«èµ›æŠ€å·§ä¸æ€»ç»“",
                "focus": "æ•°å­¦å»ºæ¨¡ç«èµ›çš„æŠ€å·§å’Œæ³¨æ„äº‹é¡¹",
                "tasks": "å­¦ä¹ ç«èµ›æŠ€å·§ï¼Œåšå¥½æ€»ç»“",
                "goal": "ä¸ºç«èµ›åšå¥½å……åˆ†å‡†å¤‡"
            }
        else:
            return {
                "chapter": "å¤ä¹ å·©å›º",
                "focus": "å¤ä¹ å‰é¢ç« èŠ‚çš„é‡ç‚¹å†…å®¹",
                "tasks": "å¤ä¹ è–„å¼±ç¯èŠ‚ï¼Œå·©å›ºçŸ¥è¯†ç‚¹",
                "goal": "å·©å›ºå·²å­¦çŸ¥è¯†"
            }
    elif days_until_competition >= 6:
        return {
            "chapter": "æ¨¡æ‹Ÿé¢˜ç»ƒä¹ ",
            "focus": "ç»¼åˆè¿ç”¨æ‰€å­¦çŸ¥è¯†",
            "tasks": "å®Œæˆæ¨¡æ‹Ÿé¢˜ï¼Œåˆ†æè§£é¢˜æ€è·¯",
            "goal": "æé«˜å®æˆ˜èƒ½åŠ›"
        }
    else:
        return {
            "chapter": "å†²åˆºå¤ä¹ ",
            "focus": "æŸ¥æ¼è¡¥ç¼ºï¼Œé‡ç‚¹çªç ´",
            "tasks": "å¤ä¹ è–„å¼±ç¯èŠ‚ï¼Œåšæœ€åå‡†å¤‡",
            "goal": "ä»¥æœ€ä½³çŠ¶æ€è¿æ¥æ¯”èµ›"
        }

def get_english_learning_content(date, day_of_week):
    """è·å–è‹±è¯­å­¦ä¹ å†…å®¹"""
    # æ ¹æ®æ—¥æœŸå®‰æ’ä¸åŒçš„è‹±è¯­å­¦ä¹ å†…å®¹
    day_of_year = date.timetuple().tm_yday
    
    # å¾ªç¯å®‰æ’ä¸åŒçš„è‹±è¯­å­¦ä¹ å†…å®¹
    content_types = [
        "é›…æ€å¬åŠ›ç»ƒä¹ ï¼šå®Œæˆä¸€ä¸ªå¬åŠ›Section",
        "é›…æ€é˜…è¯»ç»ƒä¹ ï¼šå®Œæˆä¸€ç¯‡é˜…è¯»æ–‡ç« ",
        "é›…æ€å†™ä½œç»ƒä¹ ï¼šå†™ä¸€ç¯‡å°ä½œæ–‡",
        "é›…æ€å£è¯­ç»ƒä¹ ï¼šç»ƒä¹ Part1è¯é¢˜",
        "è¯æ±‡ç§¯ç´¯ï¼šèƒŒè¯µé›…æ€æ ¸å¿ƒè¯æ±‡",
        "è¯­æ³•å¤ä¹ ï¼šé‡ç‚¹è¯­æ³•ç‚¹ç»ƒä¹ "
    ]
    
    content_index = (day_of_year - 1) % len(content_types)
    return content_types[content_index]

def generate_daily_plan(date):
    """ç”Ÿæˆå•æ—¥è®¡åˆ’"""
    year = date.year
    month = date.month
    day = date.day
    weekday = get_weekday(year, month, day)
    formatted_date = format_date(year, month, day)
    
    # è·å–æ•°å­¦å»ºæ¨¡å­¦ä¹ å†…å®¹
    math_content = get_math_modeling_content(date, weekday)
    math_details = get_math_modeling_details(date, weekday)
    english_content = get_english_learning_content(date, weekday)
    
    # æ ¹æ®æ˜ŸæœŸå‡ è°ƒæ•´è®¡åˆ’
    if weekday in ['æ˜ŸæœŸå…­', 'æ˜ŸæœŸæ—¥']:
        # å‘¨æœ«å¯ä»¥å¤šå®‰æ’ä¸€äº›å­¦ä¹ æ—¶é—´
        study_time = "9:00 - 12:00"
        english_time = "14:00 - 15:30"
        reading_time = "15:30 - 17:00"
    else:
        # å·¥ä½œæ—¥
        study_time = "10:00 - 12:00"
        english_time = "14:00 - 15:00"
        reading_time = "15:30 - 16:30"
    
    plan_content = f"""# ğŸ“… ä»Šæ—¥è®¡åˆ’

**ğŸŒ¤ï¸ å¤©æ°”ï¼šå¾…å¡«å†™ï¼Œæ¸©åº¦ å¾…å¡«å†™Â°Cï¼Œå¾…å¡«å†™**

## ğŸ¯ ä»Šæ—¥é‡ç‚¹ä»»åŠ¡

### ğŸ“š æ•°å­¦å»ºæ¨¡å­¦ä¹  (9:00 - 12:00)
- [ ] **{math_content}**
  - é˜…è¯» [DataWhaleæ•°å­¦å»ºæ¨¡æ•™ç¨‹](https://datawhalechina.github.io/intro-mathmodel/#/) {math_details['chapter']}
  - é‡ç‚¹å­¦ä¹ ï¼š{math_details['focus']}
  - {math_details['tasks']}
  - é¢„è®¡ç”¨æ—¶ï¼š2-3å°æ—¶
  - å­¦ä¹ ç›®æ ‡ï¼š{math_details['goal']}

### ğŸ“– è‹±è¯­å­¦ä¹  (14:00 - 15:00)
- [ ] **{english_content}**
  - å®Œæˆç›¸åº”çš„ç»ƒä¹ å’Œä½œä¸š
  - è®°å½•å­¦ä¹ å¿ƒå¾—å’Œéš¾ç‚¹
  - é¢„è®¡ç”¨æ—¶ï¼š1-1.5å°æ—¶
  - å­¦ä¹ ç›®æ ‡ï¼šæé«˜é›…æ€å¬è¯´è¯»å†™ç»¼åˆèƒ½åŠ›

### ğŸ“š è¯¾å¤–é˜…è¯» (15:30 - 16:30)
- [ ] **é˜…è¯»è¯¾å¤–ä¹¦ç±**
  - é€‰æ‹©ä¸€æœ¬æ„Ÿå…´è¶£çš„ä¹¦ç±
  - åšå¥½è¯»ä¹¦ç¬”è®°
  - é¢„è®¡ç”¨æ—¶ï¼š1-1.5å°æ—¶
  - å­¦ä¹ ç›®æ ‡ï¼šæ‹“å±•çŸ¥è¯†é¢

## ğŸŒ ç”Ÿæ´»å®‰æ’

### ğŸ½ï¸ ç”¨é¤æ—¶é—´
- [ ] **æ—©é¤** (8:00 - 8:30)
- [ ] **åˆé¤** (12:00 - 12:30)
- [ ] **æ™šé¤** (18:00 - 18:30)

### â˜€ï¸ æˆ·å¤–æ´»åŠ¨
- [ ] **æ™’å¤ªé˜³** (16:30 - 17:00)
  - åœ¨æ ¡å›­é‡Œæ•£æ­¥
  - å‘¼å¸æ–°é²œç©ºæ°”
  - æ”¾æ¾èº«å¿ƒ

### ğŸ® ä¼‘é—²æ—¶é—´
- [ ] **ä¼‘é—²å¨±ä¹** (19:00 - 20:00)
  - å¬éŸ³ä¹ã€çœ‹è§†é¢‘
  - ä¸æœ‹å‹èŠå¤©
  - æ”¾æ¾å¤§è„‘

## ğŸŒ™ æ™šé—´æ€»ç»“

### ğŸ“ ä»Šæ—¥æ€»ç»“ (21:00 - 21:30)
- [ ] **å›é¡¾ä»Šæ—¥å®Œæˆæƒ…å†µ**
  - æ£€æŸ¥å­¦ä¹ ä»»åŠ¡å®Œæˆåº¦
  - è®°å½•å­¦ä¹ æ”¶è·
  - æ€»ç»“é‡åˆ°çš„é—®é¢˜

### ğŸ“‹ æ˜æ—¥è®¡åˆ’ (21:30 - 22:00)
- [ ] **åˆ¶å®šæ˜æ—¥è®¡åˆ’**
  - æ ¹æ®ä»Šæ—¥è¿›åº¦è°ƒæ•´
  - å®‰æ’æ˜æ—¥é‡ç‚¹ä»»åŠ¡
  - å‡†å¤‡å­¦ä¹ ææ–™

## ğŸ“Š ä»Šæ—¥ç›®æ ‡

### ğŸ¯ ä¸»è¦ç›®æ ‡
- å®Œæˆæ•°å­¦å»ºæ¨¡å­¦ä¹ ä»»åŠ¡
- å®Œæˆè‹±è¯­å­¦ä¹ ä»»åŠ¡
- ä¿æŒè‰¯å¥½ä½œæ¯

### ğŸ“ˆ å­¦ä¹ æŒ‡æ ‡
- æ•°å­¦å»ºæ¨¡ï¼š{math_details['goal']}
- è‹±è¯­ï¼š{english_content}
- é˜…è¯»ï¼šå®Œæˆé˜…è¯»ä»»åŠ¡

---

## ğŸ’¡ å­¦ä¹ ç¬”è®°

### ğŸ“š æ•°å­¦å»ºæ¨¡å­¦ä¹ å¿ƒå¾—
- 

### ğŸ† è‹±è¯­å­¦ä¹ è®°å½•
- 

### ğŸ“– é˜…è¯»æ„Ÿæ‚Ÿ
- 

---

## ğŸŒŸ ä»Šæ—¥äº®ç‚¹
- 

## ğŸ”„ éœ€è¦æ”¹è¿›
- 

## â­ï¸ æ˜æ—¥é‡ç‚¹
- [ ] ç»§ç»­æ•°å­¦å»ºæ¨¡å­¦ä¹ 
- [ ] ç»§ç»­è‹±è¯­å­¦ä¹ 
- [ ] è°ƒæ•´å­¦ä¹ è®¡åˆ’

---

## ğŸ“‹ ä»»åŠ¡çŠ¶æ€è¯´æ˜
- `- [ ]` = æœªå¼€å§‹
- `- [x]` = å·²å®Œæˆ
- `- [~]` = éƒ¨åˆ†å®Œæˆ
- `- [!]` = å·²å–æ¶ˆ
- `- [>]` = è¿›è¡Œä¸­
- `- [?]` = éœ€è¦å¸®åŠ©
"""
    
    return plan_content

def main():
    """ä¸»å‡½æ•°"""
    print("å¼€å§‹ç”Ÿæˆæ¯æ—¥è®¡åˆ’...")
    
    # è·å–ä»Šå¤©çš„æ—¥æœŸ
    today = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0)
    target_date = datetime(2025, 9, 2)
    
    # ç¡®ä¿ç›®å½•å­˜åœ¨
    base_dir = "daily-plans"
    if not os.path.exists(base_dir):
        os.makedirs(base_dir)
    
    # ç”Ÿæˆä»ä»Šå¤©åˆ°9æœˆ2å·çš„è®¡åˆ’
    current_date = today
    plan_count = 0
    
    # è®¡ç®—æ€»å¤©æ•°
    total_days = (target_date - today).days + 1
    
    for i in range(total_days):
        current_date = today + timedelta(days=i)
        year = current_date.year
        month = current_date.month
        day = current_date.day
        
        # åˆ›å»ºå¹´æœˆç›®å½•
        year_dir = os.path.join(base_dir, str(year))
        month_dir = os.path.join(year_dir, f"{month:02d}")
        
        os.makedirs(month_dir, exist_ok=True)
        
        # ç”Ÿæˆè®¡åˆ’æ–‡ä»¶
        plan_file = os.path.join(month_dir, f"{day:02d}.md")
        plan_content = generate_daily_plan(current_date)
        
        with open(plan_file, 'w', encoding='utf-8') as f:
            f.write(plan_content)
        
        print(f"âœ… ç”Ÿæˆè®¡åˆ’: {year}å¹´{month:02d}æœˆ{day:02d}æ—¥ {get_weekday(year, month, day)}")
        plan_count += 1
    
    print(f"\nğŸ‰ è®¡åˆ’ç”Ÿæˆå®Œæˆï¼")
    print(f"ğŸ“… æ€»å…±ç”Ÿæˆäº† {plan_count} å¤©çš„è®¡åˆ’")
    print(f"ğŸ“ æ–‡ä»¶ä¿å­˜åœ¨ {base_dir} ç›®å½•ä¸‹")
    
    # æ›´æ–°å¯¼èˆªæ•°æ®
    print("\nğŸ”„ æ­£åœ¨æ›´æ–°å¯¼èˆªæ•°æ®...")
    os.system("python3 generate-nav.py")
    
    print("\nâœ¨ æ‰€æœ‰å·¥ä½œå®Œæˆï¼ç°åœ¨å¯ä»¥æŸ¥çœ‹ç”Ÿæˆçš„è®¡åˆ’äº†ã€‚")

if __name__ == "__main__":
    main()
